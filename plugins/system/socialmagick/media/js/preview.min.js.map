{"version":3,"file":"preview.min.js","names":["window","document","SocialMagickPreviewModal","constructor","modalId","modal","getElementById","backdrop","dialog","querySelector","closeBtn","isOpen","init","addEventListener","close","e","target","key","stopPropagation","open","style","display","offsetHeight","classList","add","body","overflow","dispatchEvent","CustomEvent","remove","setTimeout","openModalBtn","cancelBtn","confirmBtn","console","log"],"sources":["preview.js"],"sourcesContent":["/**\n * @package   socialmagick\n * @copyright Copyright (c)2025 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\n((window, document) => {\n    class SocialMagickPreviewModal {\n        constructor(modalId) {\n            this.modal = document.getElementById(modalId);\n            this.backdrop = this.modal;\n            this.dialog = this.modal.querySelector('.plg_system_socialmagic_modal_dialog');\n            this.closeBtn = this.modal.querySelector('.plg_system_socialmagic_modal_close_btn');\n            this.isOpen = false;\n\n            this.init();\n        }\n\n        init() {\n            // Close button click\n            if (this.closeBtn) {\n                this.closeBtn.addEventListener('click', () => this.close());\n            }\n\n            // Backdrop click (but not dialog click)\n            this.backdrop.addEventListener('click', (e) => {\n                if (e.target === this.backdrop) {\n                    this.close();\n                }\n            });\n\n            // ESC key press\n            document.addEventListener('keydown', (e) => {\n                if (e.key === 'Escape' && this.isOpen) {\n                    this.close();\n                }\n            });\n\n            // Prevent dialog clicks from closing modal\n            this.dialog.addEventListener('click', (e) => {\n                e.stopPropagation();\n            });\n        }\n\n        open() {\n            if (this.isOpen) return;\n\n            this.modal.style.display = 'flex';\n            // Force reflow to enable transition\n            this.modal.offsetHeight;\n            this.modal.classList.add('show');\n            this.isOpen = true;\n\n            // Prevent body scroll\n            document.body.style.overflow = 'hidden';\n\n            // Dispatch custom event\n            this.modal.dispatchEvent(new CustomEvent('modal:opened'));\n        }\n\n        close() {\n            if (!this.isOpen) return;\n\n            this.modal.classList.remove('show');\n            this.isOpen = false;\n\n            // Restore body scroll\n            document.body.style.overflow = '';\n\n            // Hide modal after transition\n            setTimeout(() => {\n                if (!this.isOpen) {\n                    this.modal.style.display = 'none';\n                }\n            }, 300);\n\n            // Dispatch custom event\n            this.modal.dispatchEvent(new CustomEvent('modal:closed'));\n        }\n    }\n\n    // Initialize modal\n    const modal = new SocialMagickPreviewModal('plg_system_socialmagic_modal_backdrop');\n\n    // Example usage with trigger button\n    const openModalBtn = document.getElementById('plg_system_socialmagic_btn');\n    if (openModalBtn) {\n        openModalBtn.addEventListener('click', () => modal.open());\n    }\n\n    // Example usage with footer buttons\n    const cancelBtn = document.getElementById('cancel-btn');\n    const confirmBtn = document.getElementById('confirm-btn');\n\n    if (cancelBtn) {\n        cancelBtn.addEventListener('click', () => modal.close());\n    }\n\n    if (confirmBtn) {\n        confirmBtn.addEventListener('click', () => {\n            // Handle confirmation logic here\n            console.log('Confirmed!');\n            modal.close();\n        });\n    }\n\n    // Example of listening to modal events\n    document.getElementById('plg_system_socialmagic_modal_backdrop').addEventListener('modal:opened', () => {\n        console.log('Modal opened');\n    });\n\n    document.getElementById('plg_system_socialmagic_modal_backdrop').addEventListener('modal:closed', () => {\n        console.log('Modal closed');\n    });\n\n\n})(window, document);"],"mappings":"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","ignoreList":[]}